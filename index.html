<body>
<canvas id="gameCanvas"></canvas>
<button id="player1-up">Player 1 Up</button>
<button id="player1-down">Player 1 Down</button>
<button id="player1-left">Player 1 Left</button>
<button id="player1-right">Player 1 Right</button>
<button id="player1-shoot">Player 1 Shoot</button>
<button id="player2-up">Player 2 Up</button>
<button id="player2-down">Player 2 Down</button>
<button id="player2-left">Player 2 Left</button>
<button id="player2-right">Player 2 Right</button>
<button id="player2-shoot">Player 2 Shoot</button>

<script>
    // Ваш JavaScript код здесь
    const canvas = document.getElementById('gameCanvas');
    const context = canvas.getContext('2d');
    canvas.width = 800;
    canvas.height = 400;
    
    // Остальной код здесь...
    
    // Обработчики событий для кнопок управления
    document.getElementById('player1-up').addEventListener('click', () => movePlayer(0, 'up'));
    document.getElementById('player1-down').addEventListener('click', () => movePlayer(0, 'down'));
    document.getElementById('player1-left').addEventListener('click', () => movePlayer(0, 'left'));
    document.getElementById('player1-right').addEventListener('click', () => movePlayer(0, 'right'));
    document.getElementById('player1-shoot').addEventListener('click', () => shootPlayer(0));
    
    document.getElementById('player2-up').addEventListener('click', () => movePlayer(1, 'up'));
    document.getElementById('player2-down').addEventListener('click', () => movePlayer(1, 'down'));
    document.getElementById('player2-left').addEventListener('click', () => movePlayer(1, 'left'));
    document.getElementById('player2-right').addEventListener('click', () => movePlayer(1, 'right'));
    document.getElementById('player2-shoot').addEventListener('click', () => shootPlayer(1));
    
    // Функции для управления движением и стрельбой
    function movePlayer(playerIndex, direction) {
        const player = players[playerIndex];
        if (direction === 'up') {
            player.pos[0] += Math.cos(player.angle) * player.speed;
            player.pos[1] += Math.sin(player.angle) * player.speed;
        } else if (direction === 'down') {
            player.pos[0] -= Math.cos(player.angle) * player.speed;
            player.pos[1] -= Math.sin(player.angle) * player.speed;
        } else if (direction === 'left') {
            player.pos[0] += Math.sin(player.angle) * player.speed;
            player.pos[1] -= Math.cos(player.angle) * player.speed;
        } else if (direction === 'right') {
            player.pos[0] -= Math.sin(player.angle) * player.speed;
            player.pos[1] += Math.cos(player.angle) * player.speed;
        }
    }
    
    function shootPlayer(playerIndex) {
        const player = players[playerIndex];
        const currentTime = performance.now();
        const [distance, , playerColor] = rayCasting(player.pos, player.angle, players, playerIndex);
        if (playerColor) {
            players.forEach((target, j) => {
                if (target.color === playerColor) {
                    target.health -= 1;
                    target.hitTimer = currentTime;
                    if (target.health <= 0) {
                        showWinner(context, `Player ${playerIndex + 1} Wins!`);
                        setTimeout(() => location.reload(), 3000);
                    }
                }
            });
        }
        player.cooldown = currentTime;
    }
</script>
</body>
